# 正则表达式

什么是正则表达式

正则表达式（Regular Expression）是用于匹配字符串中字符组合的模式。在JavaScript中，正则表达式也是对象

正则表通常被用来检索、替换那些符合某个模式（规则）的文本，例如验证表单：用户名表单只能输入英文字母、数字或者下划线，呢称输入框中可以输入中文（匹配）。此外，正则表达式还常用于过滤掉页面内容中的一些敏感词（替换），或从字符串中获取我们想要的特定部分提取等。

## 正则表达式的特点

1.灵活性、逻辑性和功能性非常的强。

2.可以迅速地用极简单的方式达到字符串的复杂控制。

3.对于刚接的人来说，比较晦涩难懂。比如：<span style="color:red">^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$</span>

4.实际开发，一般都是直接复制写好的正则表达式。但是要求会使用正则表达式并且根据实际情况修改正则表达式。比如用户名：/^【a-z0-9】{3,16}$/公

## 创建正则表达式

在JavaScript中，可以通过两种方式建一个正则表达式。

1.通过调用RegExp对象的构造函数创建

```js
let bds=new RegExp(/123/);
```

2.利用字面量创建正则表达式I

```js
let rg=/123/;
console.log(rg)
```

## 测试正则表达式test

test0正则对象方法，用于检测字符串是否符合该规则，对象会返回true或false，其参数是测试字符串。

```js
let rg=/123/;
let a=rg.test(123);
console.log(a)//true
let a=rg.test(213);
console.log(a)//false
```

## 正则表达式中的特殊字符

一个正则表达式可以由简单的字符构成，比如/abc/，也可以是简单和特殊字符的组合，比如/b*c/。其中特殊字符也被称为元字符，在正则表达式中是具有特殊意义的专用符号，如公、$、+等。

### 边界符

正则表达式中的边界符（位置符）用来提示字符所处的位置，主要有两个字符。

| 边界符 | 说明                           |
| ------ | ------------------------------ |
| ^      | 表示匹配行首的文本（以谁开始） |
| $      | 表示匹配行尾的文本（以谁结束） |

```js
let zz=/123/ //正则表达式里面不需要加引号不管是数字型还是字符串型  /123/只要包含这个返回都为真
console.log(zz.test(123)) //true  zz.test(1234)// true
```

#### ^

```
只要以^***开头的(1123开头)的都是true
```

```js
let ca=/^1123/
console.log(ca.test('1123456156')); //true
console.log(ca.test('a1123456156')); //false
console.log(ca.test('11123456156')); //false
console.log(ca.test('1123456abc')); //true
```

```
// 只要以***$的(123结尾)的都是true
```

#### $

```js
let cb=/123$/
console.log(cb.test('hello123')); //true
console.log(cb.test('123456156')); //false
console.log(cb.test('12334561321')); //false
console.log(cb.test('10987654321123')); //true
```

```
// 精准匹配
```

```
只要以^***$的(^123开头跟结尾123)的都是true
```

#### /^$/

```js
let cc=/^abc$/
console.log(cc.test('abc'));//true
console.log(cc.test('cba123456789abc'));//false
console.log(cc.test('abc123456789cba'));//false
console.log(cc.test('abcabc'));//false
```

#### 字符类[]

```
字符类：[]表示有一系列字符可供选择，只要匹配其中一个就可以了
```

```js
// 只要输入内容里有[abc]  ([abc其中有a或b或c 都返回true])
console.log(aaa.test('a1321313231'));   //true
console.log(aaa.test('b1321313231'));   //true
console.log(aaa.test('c1321313231'));   //true
console.log(aaa.test('d1321313231'));   //false
```

#### /^[]$/

```
只要输入内容里有/^[abc]$/  ([abc其中有a开头abc结尾或b开头abc结尾或cabc结尾开头 都返回true])
```

```js
let bbb=/^[abc]$/;
console.log(bbb.test('a'));  //     true
console.log(bbb.test('ab'));   //   false
console.log(bbb.test('abc'));    // false
console.log(bbb.test('c')); //      true
```

#### /^[a-z]$/

```
26个英文字母任何一个字母返回true
```

```js
let ccc=/^[a-z]$/
console.log(ccc.test('az'));  //     		false
console.log(ccc.test('a123s'));   //      	false
console.log(ccc.test('c'));    //     		true
console.log(ccc.test('d')); //  			true
```

```js
let ddd=/^[0-9]$/
console.log(ddd.test('0'));     //      true
console.log(ddd.test('11'));    //      false
console.log(ddd.test('123456'));//      false
console.log(ddd.test('6'));     //      true
```

### 字符组合

```
26个英文字母（大写和小写都可以）任何一个字母返回true-表示
```

```js
let eee=/^[a-zA-Z0-9]$/ //         26个英文字母（大写和小写都可以）任何一个字母返回true-表示
console.log(eee.test('1'));     //      true
console.log(eee.test('a'));     //      true
console.log(eee.test('v'));     //      true
console.log(eee.test('5'));     //      true
console.log(eee.test('aver'));  //      false
console.log(eee.test('123'));   //      false
```

#### <span style="color:red"> [^]  方括号内取反符^</span>

```
如果中总括号里面有个^,则表示反的意思，不要跟/^/混淆
```

```js
let fff=/^[^a-zA-Z0-9]$/
console.log(fff.test('......'));    //      false
console.log(fff.test('123145151')); //      false
console.log(fff.test('1'));         //      false
console.log(fff.test('abc'));       //      false
console.log(fff.test('B'))          //      false
console.log(fff.test('!'))          //      true
```

### 量词符

| 量词  | 说明             |
| ----- | ---------------- |
| *     | 重复0次或更多次  |
| +     | 重复一次或更多次 |
| ?     | 重复零次或一次   |
| {n}   | 重复n次          |
| {n,}  | 重复n次或更多次  |
| {n,m} | 重复n到m次       |
|       |                  |

####   * 0相当于>=0可以出现0次或者很多次

```js
let aa=/^a*$/
console.log(aa.test(''))
console.log(aa.test('aaaaaaaa'));
console.log(aa.test('a12341a'));
console.log(aa.test('34141fa'));
console.log(aa.test('41421'));
```

#### + 相当于>=1可以出现1次或者很多次

```js
let bb=/^a+$/
console.log(bb.test(''))            //      false
console.log(bb.test('aaaaaaaa'));   //      true
console.log(bb.test('a12341a'));    //      false
console.log(bb.test('34141fa'));    //      false
console.log(bb.test('aa'));         //      true
```

#### ？相当于1 || 0

```js
let ii=/^a?$/
console.log(ii.test(''))            //      true
console.log(ii.test('a'));          //      true
console.log(ii.test('aa'));         //      false
console.log(ii.test('abca'));       //      false
console.log(ii.test('aa'));         //      false
```

{数字} 就是重复输入的数字多少次的意思

```js
let lll=/^a{3}$/	//重复3次aaa
console.log(lll.test('aaa'));       //      true
console.log(lll.test('abaa'));      //      false
console.log(lll.test('aba312a'));
console.log(lll.test('abaa312aa'));
console.log(lll.test('absaaaaaa'));
```

{输入的数字,} //大于等于输入的数字 ，

```js
let xxx = /^a{3,}$/   //大于等于3
console.log(xxx.test('aaa'));       //      true
console.log(xxx.test('abaa'));      //      false
console.log(xxx.test('aba312a'));   //      false
console.log(xxx.test('abaa312aa')); //      false
console.log(xxx.test('aaaaaaaaaa'));//      true
```

#### {3，16} //大于3次小于16次

```js
let mmm=/^a{3,16}$/     //大于3次小于15次
console.log(mmm.test('aaaaaaaaaaaaa'));             //      true
console.log(mmm.test('aaa231312321aaaa'));          //      false
console.log(mmm.test('aaabasdasdaaaa'));            //      false
console.log(mmm.test('agaffasaaa'));                //      false
console.log(mmm.test('aaaasadasdasdasvadaaaaaa'));  //      false
console.log(mmm.test('aaaaaaaaaa'));			   //	   true
```

/^[a-zA-Z0-9_-]$/ 这个模式用户只能输入英文字母数字下划线短横线但是有边界符和[]这就限定了只能多选1

但是改成/^[a-zA-Z0-9_-]{6,16}$/ 但加上{6,16}那用户就能输入6到16个字符

```js
console.log(kkk.test('ab123daAfa'));        //true
console.log(kkk.test('af13a1dsas4a1'))      //true
console.log(kkk.test('af13ag124a1'))        //true
console.log(kkk.test('af13123dsas4a1'))     //true
console.log(kkk.test('af1313sas4a1'))       //true
```

## 用户名验证

- 分析：
    - 1.用户名只能为英文字母数字，下划线或者短横线组成，并且用户名长度为6~16位
    - 2.首先准备好这种正表达式模式/$【a-zA-Z0-9-】{6,16}^/
    - 3.当表单失去焦点就开始验证，
    - 4.如果符合正则规范，则让后面的span标签添加right类
    - 5.如果不符合正则规范，则让后面的span标签添加wrong类。

```js
let name=document.querySelector(".name");
let span=document.querySelector("#app");
let reg=/^[a-zA-Z0-9_-]{6,16}$/;
name.onblur=function () {
    if ( reg.test(this.value) ){
        span.className='green'
        span.innerHTML='用户名格式输入正确'
    }else{
        // console.log("错误的")
        span.className='red'
        span.innerHTML='用户名格式输入错误'
    }
}
```

## 括号总结

3.5括号总结

1.大括号量词符。里面表示重复次数

- ​ 中括号字符集合。匹配方括号中的任意字符。

2.中括号字符集合。匹配方括号中的任意字符

- ​ 大括号量词符，里面表示重复次数

3.小括号表示优先级

- ​ 小括号表示优先级

## 预定义类

预定义类指的是某些常见模式的简写方式。

| 预定义 | 说明                                |
| ------ | ----------------------------------- |
| \d     | 匹配0-9之间的任一数字，相当于[0-9]  |
| \D     | 匹配所有0-9以外的字符，相当于[ ^0-9 ] |
| \w     | 匹配任意的字母、数字和下划线，相当于[A-Za-z0-9_ ] |
| \W     | 除所有字母、数字和下划线以外的字符，相当于[ ^A-Za-z0-9_ ] |
| \s     | 匹配空格（包括换行符、制表符、空格符等），相等于[\t\r\n\v\f] |
| \S     | 匹配非空格的字符，相当于[ ^\t\r\n\v\f] |
|        |                                     |

## 座机号码验证

座机号码验证：全国座机号码两种格式：010-12345678或者0530-1234567

或者符号

#### |let reg=/^\d{3}-\d{8}|\d{4}-\d{7}$/

## 正则表单验证

### html

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>注册页面</title>
    <!-- 初始化css -->
    <link rel="stylesheet" href="css/base.css">
    <!-- register css文件 -->
    <link rel="stylesheet" href="css/register.css">
    <script src="js/reg.js"></script>
</head>
<body>
<div class="w">
    <!-- header -->
    <div class="header"><div class="logo"><a href="index.html"><img src="img/logo.png" alt=""></a></div></div>
    <!-- registerarea -->
    <div class="registerarea">
        <h3>
            注册新用户
            <em>我有账号，去<a href="login.html">登陆</a></em>
        </h3>
        <div class="reg_form">
            <form action="demo.php">
                <ul>
                    <li>
                        <label for="tel">手机号:</label>
                        <input type="text" class="inp" id="tel">
                        <span class="cw"></span>
                    </li>
                    <li>
                        <label for="">QQ:</label>
                        <input type="text" class="inp" id="qq">
                        <span></span>
                    </li>
                    <li>
                        <label for="">昵称:</label>
                        <input type="text" class="inp" id="nc">
                        <span></span>
                    </li>
                    <li>
                        <label for="">短信验证码:</label>
                        <input type="text" class="inp" id="msg">
                        <span></span>
                    </li>
                    <li>
                        <label for="">登陆密码:</label>
                        <input type="text" class="inp" id="pwd">
                        <span></span>
                    </li>
                    <li class="safe">
                        安全程度
                        <em class="ruo">弱</em>
                        <em class="zhong">中</em>
                        <em class="qiang">强</em>
                    </li>
                    <li>
                        <label for="">确认密码:</label>
                        <input type="text" class="inp" id="surepwd">
                        <span></span>
                    </li>
                    <li class="agree">
                        <input type="checkbox">同意协议并注册
                        <a href="#">《知果果用户协议》</a>
                    </li>
                    <li>
                        <input type="submit" value="完成注册" class="over">
                    </li>
                </ul>
            </form>
        </div>
    </div>
    <div class="footer">
        <p class="links">
            关于我们 | 联系我们 | 联系客服 | 商家入驻 | 营销中心 | 手机品优购 | 友情链接 | 销售联盟 | 品优购社区 | 品优购公益 | English Site | Contact U
        </p>
        <p class="copyright">
            地址：北京市昌平区建材城西路金燕龙办公楼一层 邮编：100096 电话：400-618-4000 传真：010-82935100 邮箱: zhanghj+itcast.cn <br>
            京ICP备08001421号京公网安备110108007702
        </p>
    </div>
</div>
</body>
</html>
```

### JavaScript

```js
window.addEventListener("load",()=>{
    //正则模块
    let zz=/^1[3|4|5|6|7|8|9]\d{9}$/    //手机号码的验证规则
    let qq=/^[1-9]\d{4,}$/              //qq号码验证规则
    let hz=/^[\u4e00-\u9fa5]{2,8}/      //昵称验证规则
    let dx=/^\d{6}/                     //短信验证码
    let pwd=/^[a-zA-Z0-9_-]{6,16}$/
    //获取元素
    const telzz=document.querySelector("#tel");
    const telqq=document.querySelector("#qq");
    const telhz=document.querySelector("#nc");
    const teldx=document.querySelector("#msg");
    const telpwd=document.querySelector("#pwd");
    const pwdS=document.querySelector("#surepwd");
    //封装判断正则的函数
    function regexp(el,regular,span) {
        let format=span
        el.addEventListener("blur",function () {
            if (regular.test(this.value) ){
                this.nextElementSibling.className='zq';
                this.nextElementSibling.innerHTML=`<i class="success_icon"></i>${format}格式正确  ;`
            }else{
                this.nextElementSibling.className='cw';
                this.nextElementSibling.innerHTML=`<i class="error_icon"></i>${format}格式错误，请重新输入 ;`
            }
        })
    }
    //手机号码验证   regexp(元素,正则，提示)
    regexp(telzz,zz,'手机号码')
    //QQ号码验证
    regexp(telqq,qq,'qq');
    //昵称验证
    regexp(telhz,hz,'昵称');
    //短信验证
    regexp(teldx,dx,'验证码')
    //密码验证
    regexp(telpwd,pwd,'密码错误')
    //二次密码验证
    pwdS.onblur=function () {
        console.log(this.value);
        console.log(this)
        if ( this.value==telpwd.value ){
            this.nextElementSibling.className='zq';
            this.nextElementSibling.innerHTML=`<i class="success_icon"></i>密码输入正确  ;`
        }else{
            this.nextElementSibling.className='cw';
            this.nextElementSibling.innerHTML=`<i class="success_icon"></i>密码输入错误  ;`
        }
    }
})
```

## 正则表达式中的替换

### replace替换

replace0方法可以实现替换字符串操作，用来替换的参数可以是一个字符串或是一个正则表达式。

![image-20220209180540360](C:\Users\move\AppData\Roaming\Typora\typora-user-images\image-20220209180540360.png)

- 1.第一个参数：被替换的字符串或者正则表达式

- 2.第二个参数：替换为的字符串

- 3.返回值是一个替换完毕的新字符串

### /正则/g 全局替换

```
/激情/g
```

```js
let p=document.querySelector("#app");
let inp=document.querySelector("#inp");
console.log(inp)
let btn=document.querySelector("#btn");
// 替换reolace
let str='andy和red';
let newStr=str.replace('red','an');
console.log(newStr)
btn.addEventListener("click",function () {
    p.innerHTML=`${inp.value.replace(/激情/g,'***')}`
})
```

```html
<p id="app"></p>
<textarea name="" cols="30" rows="10" id="inp"></textarea>
<button id="btn">zc</button>
```